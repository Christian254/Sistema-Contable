{% extends "Base/base.html" %}

{% block Titulo %}
Planilla de Salarios
{% endblock Titulo %}

{% block Contenido %}
<br><br><br>



{% if val == 0 %}
<section class="container" style="width:50%">
<h1 class="titulo-03">SISTEMA DE SALARIOS</h1>
<br>
<a href="/planilla/" style="display: inline-block;margin-left:30%;width:40%;" id="detalle">Planilla General</a><br><br>
<a href="/planilla-areas/" style="display: inline-block;margin-left:30%;width:40%;" id="detalle">Planilla por Areas</a><br><br>
<a href="/puestos/" style="display: inline-block;margin-left:30%;width:40%;" id="detalle">Puestos</a><br><br><br>
</section>
{% endif %}



{% if val == 1%}
<input id="detalle" type="submit" value="Ingresar en planilla" style="margin-left:4%; margin-top:3%;" onclick="CrearCuenta()"/>


<div style="margin-top:0%" id="a0">
	<div id="caja-0" class="caja-0" style="height: 440px;">
		<div id="form-detalle">
			<div class="caja-1">
				<h1 class="titulo-02">Ingreso en planilla</h1><br>
				<form action="" method="post">
					{% csrf_token %}
					 	<label for="">Area:</label><br>
					 		<select style="height: 30px;" name="cargo" id="cargo" required="">
							{% for puesto in c %}
								<option value="{{puesto.id}}">{{puesto.cargo}}</option>
							{% endfor %}
							</select><br><br>
						 <label for="">Empleado:</label><br>
						 <input type="text" style="height: 30px;" name="empleado" id="empleado" class="form-control" required=""><br>
						 <label for="">Años Laborados:</label><br>
						 <input type="number" name="anios" id="anios" value="0" class="form-control" required=""><br>
					<button type="submit" class="btn btn-primary dropdown-toggle">Guardar</button>
</form>
</div></div>
</div>
</div>


<section class="container" style="margin-top:1%;">

<div class="tabla-0">
	<table class="tabla-1">
		<caption class="titulo-0">PLANILLA DE SALARIOS</caption>
	<tr>
		<th style="padding-left: 2px; padding-right: 2px; text-align: center;">ID</th>
		<th style="padding-left: 2px; padding-right: 2px; text-align: center;">Empleado</th>
		<th style="padding-left: 2px; padding-right: 2px; text-align: center;">Cargo</th>
		<th style="padding-left: 2px; padding-right: 2px; text-align: center;">Salario Nominal (Mensual)</th>
		<th style="padding-left: 2px; padding-right: 2px; text-align: center;">ISSS</th>
		<th style="padding-left: 2px; padding-right: 2px; text-align: center;">AFP</th>
		<th style="padding-left: 2px; padding-right: 2px; text-align: center;">INSAFORP</th>
		<th style="padding-left: 2px; padding-right: 2px; text-align: center;">Vacaciones</th>
		<th style="padding-left: 2px; padding-right: 2px; text-align: center;">Aguinaldo</th>
		<th style="padding-left: 2px; padding-right: 2px; text-align: center;">Costo Mensual</th>
		<th style="padding-left: 2px; padding-right: 2px; text-align: center;">Accion</th>
	</tr>
	{% for pe in p %}
		<tr>
			<td style="padding-left: 2px; padding-right: 2px; text-align: center;">{{pe.cargo_id}}</td>
			<td style="padding-left: 2px; padding-right: 2px; text-align: center;">{{pe.nomEmpleado}}</td>

			{% for puesto in c %}
				{% if pe.cargo_id == puesto.id %}
					<td style="padding-left: 2px; padding-right: 2px; text-align: center;">{{puesto.cargo}}</td>
					<td style="padding-left: 2px; padding-right: 2px; text-align: center;">{{puesto.salNominal}}</td>
				{% endif %}
			{% endfor %}

			<td style="padding-left: 2px; padding-right: 2px; text-align: center;">{{pe.isss}}</td>
			<td style="padding-left: 2px; padding-right: 2px; text-align: center;">{{pe.afp}}</td>
			<td style="padding-left: 2px; padding-right: 2px; text-align: center;">{{pe.insaforp}}</td>
			<td style="padding-left: 2px; padding-right: 2px; text-align: center;">{{pe.vaca}}</td>
			<td style="padding-left: 2px; padding-right: 2px; text-align: center;">{{pe.aguinaldo}}</td>
			<td style="padding-left: 2px; padding-right: 2px; text-align: center;">{{pe.salPersonal}}</td>
			<td style="padding-left: 2px; padding-right: 2px; text-align: center;"><a href="{% url 'contable:admin_planilla' pe.id %}" class="btn-a">Admin</a></td>
		</tr>
	{% endfor %}
	<tr>
		<td style="padding-left: 28px; padding-right: 2px; text-align: center;">COSTO TOTAL</td>
		<td style="padding-left: 28px; padding-right: 2px; text-align: center;">{{total}}</td>
	</tr>	
</table>

</div>
</section>

{% endif %}



{% if val == 2 %}

<section class="container" style="margin-top:1%;">
<div class="tabla-0">
	<table class="tabla-1">
		<caption class="titulo-0">Área de Producción</caption>
	<tr>
		<th style="padding-left: 2px; padding-right: 2px;">Empleado</th>
		<th style="padding-left: 2px; padding-right: 2px;">Cargo</th>
		<th style="padding-left: 2px; padding-right: 2px;">Salario Nominal (Mensual)</th>
		<th style="padding-left: 2px; padding-right: 2px;">ISSS</th>
		<th style="padding-left: 2px; padding-right: 2px;">AFP</th>
		<th style="padding-left: 2px; padding-right: 2px;">INSAFORP</th>
		<th style="padding-left: 2px; padding-right: 2px;">Vacaciones</th>
		<th style="padding-left: 2px; padding-right: 2px;">Aguinaldo</th>
		<th style="padding-left: 2px; padding-right: 2px;">Costo Mensual</th>
		<th style="padding-left: 2px; padding-right: 2px;">Accion</th>
	</tr>
		{% for pe in p %}
			<tr>
			{% for puesto in c %}
				{% if puesto.area == 'Produccion' %}
					{% if pe.cargo_id == puesto.id %}
						<td style="padding-left: 2px; padding-right: 2px;">{{pe.nomEmpleado}}</td>
						<td style="padding-left: 2px; padding-right: 2px;">{{puesto.cargo}}</td>
						<td style="padding-left: 2px; padding-right: 2px;">{{puesto.salNominal}}</td>
						<td style="padding-left: 2px; padding-right: 2px;">{{pe.isss}}</td>
						<td style="padding-left: 2px; padding-right: 2px;">{{pe.afp}}</td>
						<td style="padding-left: 2px; padding-right: 2px;">{{pe.insaforp}}</td>
						<td style="padding-left: 2px; padding-right: 2px;">{{pe.vaca}}</td>
						<td style="padding-left: 2px; padding-right: 2px;">{{pe.aguinaldo}}</td>
						<td style="padding-left: 2px; padding-right: 2px;">{{pe.cmo}}</td>
						<td style="padding-left: 2px; padding-right: 2px;"><a href="{% url 'contable:admin_planilla' pe.id %}" class="btn-a">Admin</a></td>
					{% endif %}
				{% endif %}
			{% endfor %}
			</tr>
		{% endfor %}	
		<tr>
			<td style="padding-left: 2px; padding-right: 2px;">TOTAL PRODUCCIÓN</td>
			<td style="padding-left: 2px; padding-right: 2px;">{{to}}</td>
		</tr>
</table>
</div>

<div class="tabla-0">
	<table class="tabla-1">
<caption class="titulo-0">Área de Mercadeo</caption>
	<tr>
		<th style="padding-left: 2px; padding-right: 2px;">Empleado</th>
		<th style="padding-left: 2px; padding-right: 2px;">Cargo</th>
		<th style="padding-left: 2px; padding-right: 2px;">Salario Nominal (Mensual)</th>
		<th style="padding-left: 2px; padding-right: 2px;">ISSS</th>
		<th style="padding-left: 2px; padding-right: 2px;">AFP</th>
		<th style="padding-left: 2px; padding-right: 2px;">INSAFORP</th>
		<th style="padding-left: 2px; padding-right: 2px;">Vacaciones</th>
		<th style="padding-left: 2px; padding-right: 2px;">Aguinaldo</th>
		<th style="padding-left: 2px; padding-right: 2px;">Costo Mensual</th>
		<th style="padding-left: 2px; padding-right: 2px;">Accion</th>
	</tr>
		{% for pe in p %}
			<tr>
			{% for puesto in c %}
				{% if puesto.area == 'Mercadeo' %}
					{% if pe.cargo_id == puesto.id %}
						<td style="padding-left: 2px; padding-right: 2px;">{{pe.nomEmpleado}}</td>
						<td style="padding-left: 2px; padding-right: 2px;">{{puesto.cargo}}</td>
						<td style="padding-left: 2px; padding-right: 2px;">{{puesto.salNominal}}</td>
						<td style="padding-left: 2px; padding-right: 2px;">{{pe.isss}}</td>
						<td style="padding-left: 2px; padding-right: 2px;">{{pe.afp}}</td>
						<td style="padding-left: 2px; padding-right: 2px;">{{pe.insaforp}}</td>
						<td style="padding-left: 2px; padding-right: 2px;">{{pe.vaca}}</td>
						<td style="padding-left: 2px; padding-right: 2px;">{{pe.aguinaldo}}</td>
						<td style="padding-left: 2px; padding-right: 2px;">{{pe.cmo}}</td>
						<td style="padding-left: 2px; padding-right: 2px;"><a href="{% url 'contable:admin_planilla' pe.id %}" class="btn-a">Admin</a></td>
					{% endif %}
				{% endif %}
			{% endfor %}
			</tr>
		{% endfor %}	
		<tr>
			<td style="padding-left: 2px; padding-right: 2px;">TOTAL MERCADEO</td>
			<td style="padding-left: 2px; padding-right: 2px;">{{tm}}</td>
		</tr>
</table></div>		

<div class="tabla-0">
	<table class="tabla-1">
<caption class="titulo-0">Área de Administración</caption>

	<tr>
		<th style="padding-left: 2px; padding-right: 2px;">Empleado</th>
		<th style="padding-left: 2px; padding-right: 2px;">Cargo</th>
		<th style="padding-left: 2px; padding-right: 2px;">Salario Nominal (Mensual)</th>
		<th style="padding-left: 2px; padding-right: 2px;">ISSS</th>
		<th style="padding-left: 2px; padding-right: 2px;">AFP</th>
		<th style="padding-left: 2px; padding-right: 2px;">INSAFORP</th>
		<th style="padding-left: 2px; padding-right: 2px;">Vacaciones</th>
		<th style="padding-left: 2px; padding-right: 2px;">Aguinaldo</th>
		<th style="padding-left: 2px; padding-right: 2px;">Costo Mensual</th>
		<th style="padding-left: 2px; padding-right: 2px;">Accion</th>
	</tr>
		{% for pe in p %}
			<tr>
			{% for puesto in c %}
				{% if puesto.area == 'Administracion' %}
					{% if pe.cargo_id == puesto.id %}
						<td style="padding-left: 2px; padding-right: 2px;">{{pe.nomEmpleado}}</td>
						<td style="padding-left: 2px; padding-right: 2px;">{{puesto.cargo}}</td>
						<td style="padding-left: 2px; padding-right: 2px;">{{puesto.salNominal}}</td>
						<td style="padding-left: 2px; padding-right: 2px;">{{pe.isss}}</td>
						<td style="padding-left: 2px; padding-right: 2px;">{{pe.afp}}</td>
						<td style="padding-left: 2px; padding-right: 2px;">{{pe.insaforp}}</td>
						<td style="padding-left: 2px; padding-right: 2px;">{{pe.vaca}}</td>
						<td style="padding-left: 2px; padding-right: 2px;">{{pe.aguinaldo}}</td>
						<td style="padding-left: 2px; padding-right: 2px;">{{pe.cmo}}</td>
						<td style="padding-left: 2px; padding-right: 2px;"><a href="{% url 'contable:admin_planilla' pe.id %}" class="btn-a">Admin</a></td>
					{% endif %}
				{% endif %}
			{% endfor %}
			</tr>
		{% endfor %}	
		<tr>
			<td style="padding-left: 2px; padding-right: 2px;">TOTAL ADMINISTRACIÓN</td>
			<td style="padding-left: 2px; padding-right: 2px;">{{ta}}</td>
		</tr>
</table></div>
<h2 style="width:50%;margin-left:4%;color:white; border-color:white;margin-bottom:4%;">TOTAL DE COSTO: {{total}}</h2>
{% endif %}
</section>
{% endblock %}